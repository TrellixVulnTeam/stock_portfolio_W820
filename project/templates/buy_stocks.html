{% extends 'base.html' %} {% block content%}
<div class="row">
  <div class="col-xs-12 col-sm-3">
    <div class="card">
      <div class="card-header">
        <strong class="card-title">Customer</strong>
      </div>
      <div class="card-body">
        <select data-placeholder="Choose a country..." class="standardSelect">
          <option value=""></option>
          <option value="United States" selected>United States</option>
          <option value="United Kingdom">United Kingdom</option>
          <option value="Afghanistan">Afghanistan</option>
          <option value="Aland Islands">Aland Islands</option>
          <option value="Albania">Albania</option>
          <option value="Algeria">Algeria</option>
          <option value="American Samoa">American Samoa</option>
          <option value="Andorra">Andorra</option>
          <option value="Angola">Angola</option>
          <option value="Anguilla">Anguilla</option>
          <option value="Antarctica">Antarctica</option>
        </select>
      </div>
    </div>
  </div>
  <div
    class="col-xs-12 col-sm-9"
    style="text-align: center; padding-top: 45px; font-size: 20px; font-family: monospace"
  >
    Portfolio generated by the Transactions
  </div>
</div>

<div class="row">
  <div class="col-lg-6">
    <div class="card">
      <div class="card-body">
        <h4 class="mb-3">Real Chart</h4>
        <div class="flot-container">
          <div id="cpu-load" class="cpu-load"></div>
        </div>
      </div>
    </div>
  </div>
  <!-- /# column -->
  <!-- 
                <div class="col-lg-6">
                    <div class="card">
                        <div class="card-body">
                            <h4 class="mb-3">Line Chart</h4>
                            <div class="flot-container">
                                <div id="flot-line" class="flot-line"></div>
                            </div>
                        </div>
                    </div>
                </div>/# column -->
</div>
<!-- /# row -->
{% endblock %} {% block script %}

<!--  flot-chart js -->
<script src="vendors/flot/excanvas.min.js"></script>
<script src="vendors/flot/jquery.flot.js"></script>
<script src="vendors/flot/jquery.flot.pie.js"></script>
<script src="vendors/flot/jquery.flot.time.js"></script>
<script src="vendors/flot/jquery.flot.stack.js"></script>
<script src="vendors/flot/jquery.flot.resize.js"></script>
<script src="vendors/flot/jquery.flot.crosshair.js"></script>
<script src="assets/js/init-scripts/flot-chart/curvedLines.js"></script>
<script src="assets/js/init-scripts/flot-chart/flot-tooltip/jquery.flot.tooltip.min.js"></script>
<!-- <script src="assets/js/init-scripts/flot-chart/flot-chart-init.js"></script> -->
<script>
  (function ($) {
    "use strict"; // Start of use strict

    var SufeeAdmin = {
      cpuLoad: function () {
        var data = [],
          totalPoints = 100;

        function getRandomData() {
          if (data.length > 0) data = data.slice(1);

          // Do a random walk

          const clt = new XMLHttpRequest();
          const url = "/stock_prices?symbol=GOOGL";
          clt.open("GET", url, false);
          clt.send();
          var res = JSON.parse(clt.responseText);

          var idxs = [];
          console.log(res);

          for (var i = 0; i < 100; i++) {
            res[i] = parseInt(res["prices"][i]);
            idxs.push(parseInt(res["timestamp"][i]) / 1000000);
          }
          //console.log(res)
          data = data.concat(res["prices"].splice(0, totalPoints - data.length).reverse());
          // console.log(data);
          // Zip the generated y values with the x values
          //console.log(idxs);
          var respo = [];
          for (var i = 0; i < data.length; ++i) {
            respo.push([idxs[i], parseInt(data[i])]);
          }
          console.log(idxs);
          //console.log(data);
          return respo;
          /*clt.onreadystatechange=(e)=>{
                   //console.log(clt.responseText);
                   var res = JSON.parse(clt.responseText);
                   //console.log(typeof res);
                   for (var i=0; i<res.length; i++) {
                       res[i] = parseInt(res[i]);
                   }
                    //console.log(res.length);
                    data = data.concat(res.splice(0,totalPoints-data.length).reverse());
                    //console.log("data");
                    //console.log(data.length);


               // Zip the generated y values with the x values
                   

               
               }*/

          /*
               const url = "/stock_prices?symbol=GOOGL";

               $.get(url,function(data,status){
                   
                var res = JSON.parse(clt.responseText);
                for (var i=0; i<res.length; i++) {
                    res[i] = parseInt(res[i]);
                }
                 //console.log(res.length);
                 data = data.concat(res.splice(0,totalPoints-data.length).reverse());
                 console.lot(data);
               })

               var resp = [];
               setTimeout(()=>{
                    for ( var i = 0; i < data.length; ++i ) {
                        resp.push( [ i, data[ i ] ] )
                    }
                    console.log(resp);
                    return resp;
               },3000);
               const url = "/stock_prices?symbol=GOOGL";
   */

          /*     var HttpClient = function() {
                this.get = function(aUrl, aCallback) {
                    var anHttpRequest = new XMLHttpRequest();
                    anHttpRequest.onreadystatechange = function() { 
                        if (anHttpRequest.readyState == 4 && anHttpRequest.status == 200)
                            aCallback(anHttpRequest.responseText);
                    }
            
                    anHttpRequest.open( "GET", aUrl, true );            
                    anHttpRequest.send( null );
                }
            } */

          /*    var client = new HttpClient();
               client.get('/stock_prices?symbol=GOOGL', function(response) {
                   // do something with response
                   //console.log(client.responseText);
                   var res = JSON.parse(client.responseText);
                   //console.log(typeof res);
                   for (var i=0; i<res.length; i++) {
                       res[i] = parseInt(res[i]);
                   }
                    console.log(res.length);
                    data = data.concat(res.splice(0,totalPoints-data.length).reverse());
                    console.log("data");
                    console.log(data.length);


               // Zip the generated y values with the x values
                    var resp = [];
                    for ( var i = 0; i < data.length; ++i ) {
                        resp.push( [ i, data[ i ] ] )
                    }
        
                    return resp;
                   var res = JSON.parse(response);
                   //console.log(typeof res);
                   for (var i=0; i<res.length; i++) {
                       res[i] = parseInt(res[i]);
                   }
                    console.log(res.length);
                    data = data.concat(res.splice(0,totalPoints-data.length).reverse());
               });
               console.log(data.length);

               var res = [];
               for ( var i = 0; i < data.length; ++i ) {
                   res.push( [ i, data[ i ] ] )
               }
   
               return res;
               */
          /* while ( data.length < totalPoints ) {
   
                   var prev = data.length > 0 ? data[ data.length - 1 ] : 50,
                       y = prev + Math.random() * 10 - 5;
                   if ( y < 0 ) {
                       y = 0;
                   } else if ( y > 100 ) {
                       y = 100;
                   }
   
                   data.push( y );
               } */

          // Zip the generated y values with the x values
        }

        // Set up the control widget

        var updateInterval = 1000;
        $("#updateInterval")
          .val(updateInterval)
          .change(function () {
            var v = $(this).val();
            if (v && !isNaN(+v)) {
              updateInterval = +v;
              if (updateInterval < 1) {
                updateInterval = 1;
              } else if (updateInterval > 3000) {
                updateInterval = 3000;
              }
              $(this).val("" + updateInterval);
            }
          });

        var plot = $.plot("#cpu-load", [getRandomData()], {
          series: {
            shadowSize: 0, // Drawing is faster without shadows
          },
          yaxis: {
            min: 2000,
            max: 2200,
          },
          xaxis: {
            show: true,
          },
          colors: ["#007BFF"],
          grid: {
            color: "transparent",
            hoverable: true,
            borderWidth: 1,
            backgroundColor: "transparent",
          },
          tooltip: true,
          tooltipOpts: {
            content: "Y: %y",
            defaultTheme: false,
          },
        });

        function update() {
          plot.setData([getRandomData()]);

          // Since the axes don't change, we don't need to call plot.setupGrid()

          plot.draw();
          setTimeout(update, updateInterval);
        }

        update();
      },
    };

    $(document).ready(function () {
      SufeeAdmin.cpuLoad();
      //SufeeAdmin.lineFlot();
      //SufeeAdmin.pieFlot();
      //SufeeAdmin.line2Flot();
      //SufeeAdmin.barFlot();
      //SufeeAdmin.plotting();
    });
  })(jQuery);
</script>

<script>
  jQuery(document).ready(function () {
    jQuery(".standardSelect").chosen({
      disable_search_threshold: 10,
      no_results_text: "Oops, nothing found!",
      width: "100%",
    });
  });
</script>

<script>
  /* ( function ( $ ) {
    "use strict";

    // single bar chart
    var ctx = document.getElementById( "singelBarChart" );
    ctx.height = 150;
    var myChart = new Chart( ctx, {
        type: 'horizontalBar',
        data: {
            labels: [ "Sun", "Mon", "Tu", "Wed", "Th", "Fri", "Sat" ],
            datasets: [
                {
                    barThickness: 5,
                    label: "My First dataset",
                    data: [ -40, 55, 75, -81, 56, 55, 40 ],
                    borderColor: "rgba(0, 123, 255, 0.9)",
                    borderWidth: "0",
                    backgroundColor: ["rgba(50, 100, 255, 0.5)","rgba(50, 200, 255, 0.5)","rgba(50, 200, 255, 0.5)","rgba(50, 100, 255, 0.5)","rgba(50, 200, 255, 0.5)","rgba(50, 200, 255, 0.5)","rgba(50, 200, 255, 0.5)"]
                            }
                        ]
        },
        options: {
            scales: {
                yAxes: [ {
                    ticks: {
                        beginAtZero: true
                    }
                                } ]
            }
        }
    } );




} )( jQuery );
*/
</script>

<script>
  (function ($) {
    //    "use strict";

    /*  Data Table
    -------------*/

    $("#bootstrap-data-table").DataTable({
      lengthMenu: [
        [10, 20, 50, -1],
        [10, 20, 50, "All"],
      ],
    });

    $("#bootstrap-data-table-export").DataTable({
      serching: false,
      dom: "lrtip",
      bLengthChange: false,
      lengthMenu: [
        [8, 25, 50, -1],
        [8, 25, 50, "All"],
      ],
      buttons: ["copy", "csv", "excel", "pdf", "print"],
    });

    $("#row-select").DataTable({
      initComplete: function () {
        this.api()
          .columns()
          .every(function () {
            var column = this;
            var select = $('<select class="form-control"><option value=""></option></select>')
              .appendTo($(column.footer()).empty())
              .on("change", function () {
                var val = $.fn.dataTable.util.escapeRegex($(this).val());

                column.search(val ? "^" + val + "$" : "", true, false).draw();
              });

            column
              .data()
              .unique()
              .sort()
              .each(function (d, j) {
                select.append('<option value="' + d + '">' + d + "</option>");
              });
          });
      },
    });
  })(jQuery);
</script>
{% endblock %}
